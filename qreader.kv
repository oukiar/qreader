
#:import ImageButton devslib.utils
#:import ScrollBox devslib.scrollbox

<LabelData>:

    content:content
    title: "Label information"
    
    GridLayout:
        id:content
        cols: 2
    
<Detector>:
    orientation: 'vertical'
    detector:detector
    message:message

    ZbarQrcodeDetector:
        id: detector
        on_datadecoded: root.decoded(args[1])
    Label:
        id: message
        text: "Detecting ..."
        size_hint_y: None
        height: '100dp'
        

    Button:
        text: "Get label data"
        size_hint_y: None
        on_press: root.show_label()

    BoxLayout:
        size_hint_y: None
        height: '48dp'

        Button:
            text: 'Scan a qrcode'
            on_release: detector.start()
        Button:
            text: 'Stop detection'
            on_release: detector.stop()

<RepackForm>:

    agent:agent
    consignee:consignee
    zone:zone
    transport:transport
    contentnotes:contentnotes
    generalnotes:generalnotes
    internalnotes:internalnotes
    
    title: "Repack information"
    BoxLayout:
        orientation: "vertical"
        padding: 10
        spacing: 5
        BoxLayout:
            Label:
                text: "Agent"
            TextInput:
                id: agent
                
        BoxLayout:
            Label:
                text: "Consignee"
            TextInput:
                id: consignee
                on_text: app.root.do_clientcomplete(self)
        BoxLayout:
            Label:
                text: "Zone"
            TextInput:
                id:zone
            
        BoxLayout:
            Label:
                text: "Transport"
            Spinner:
                values: ('DHL', "Fedex", "UPS")
                id:transport
                
        BoxLayout:
            Label:
                text: "Content"
            TextInput:
                id:contentnotes
            
        BoxLayout:
            Label:
                text: "General notes"
            TextInput:
                id: generalnotes
            
        BoxLayout:
            Label:
                text: "Internal notes"
            TextInput:
                id:internalnotes
        
        Button:
            text: "Save repack"
            size_hint_y: None
            on_press: app.root.repack_save()

<Login@AnchorLayout>:
    username: username
    password: password

    anchor_x: "center"
    anchor_y: "center"
    BoxLayout:
        orientation: "vertical"
        size_hint: (None,None)
        size: (400,400)
        spacing: 20
        
        ImageButton:
            source: "bar-code.png"
            
        Label:
            text: "Username"
        TextInput:
            id: username
            text: "natsynapses@neurons"
        Label:
            text: "Password"
        TextInput:
            id: password
            text: "orwell1984"
            password: True
            
        Button:
            text: "Sign in"
            on_press: app.root.signin()

<LabelReceipt>:
    receipt: receipt
    consignee: consignee
    zone: zone
    volume: volume
    country: country
    objectId: objectId
    BoxLayout:
        orientation: "vertical"
        spacing:10
        
        Label:
            id: consignee
            font_size: 20
            text: "[b]Consignee:[/b]\n Sandra Rivas"
            markup: True
        Label:
            id: receipt
            text: "Receipt#: 165"
        
    BoxLayout:
        orientation: "vertical"
        Label:
            id: zone
            text: "Zone: 42"
        Label:
            id: volume
            text: "Volume 56"
                        
                        
    BoxLayout:
        orientation: "vertical"
        Label:
            id: country
            text: "Country: Panama"
        Label:
            id: objectId
            text: "ID: 00000"

<Repack>:
    detector:detector
    message:message
    boxlabels:boxlabels
    
    title: "Scan the labels !"
    
    BoxLayout:
        orientation: "vertical"
        spacing: 20
        ZbarQrcodeDetector:
            id: detector
            size_hint_y: None
            on_datadecoded: root.decoded(args[1])
        Label:
            id: message
            text: "Labels: "
            
        ScrollBox:
            orientation: "vertical"
            id: boxlabels
        
        Button:
            text: "Done"
            on_press: app.root.repack_done()

<Main>:
    BoxLayout:
        orientation: "vertical"
        Button:
            text: "Repack"
            on_press: app.root.on_repack()
        Button:
            text: "Receive"
        ImageButton:
            source: "box.png"
            
<QReader>:

    detector:detector
    message:message
    
    BoxLayout:
        orientation: "vertical"
        spacing: 20
        ZbarQrcodeDetector:
            id: detector
            size_hint_y: None
            on_datadecoded: root.decoded(args[1])
        Label:
            id: message
            text: "Labels: "



